<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crear Comunidad - GameZone</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="../css/estilos.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="icon" type="image/png" href="../icono/1032996.png">
</head>
<body>
  <!-- Navigaci√≥n -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand" href="index.html">
        <i class="fas fa-gamepad me-2"></i>GameZone
      </a>
      <div class="navbar-nav ms-auto">
        <a class="nav-link" href="comunidades.html">
          <i class="fas fa-arrow-left me-1"></i>Volver a Comunidades
        </a>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="container py-4">
    <div class="row">
        <!-- Vista Previa (Columna Derecha) -->
        <div class="col-lg-4">
            <div class="sticky-top" style="top: 20px;">
                <div class="preview-card">
                    <h4 class="text-center mb-4">
                        <i class="fas fa-eye me-2"></i>Vista Previa
                    </h4>
                    <div id="vistaPreviaComunidad">
                        <div class="text-center text-muted">
                            <i class="fas fa-users fa-3x mb-3"></i>
                            <p>La vista previa aparecer√° aqu√≠</p>
                        </div>
                    </div>
                </div>

                <!-- Estad√≠sticas R√°pidas -->
                <div class="preview-card mt-4">
                    <h5 class="text-center mb-3">üìä Tu Progreso</h5>
                    <div id="estadisticasProgreso">
                        <div class="d-flex justify-content-between text-sm mb-2">
                            <span>Completado:</span>
                            <span id="porcentajeCompletado">0%</span>
                        </div>
                        <div class="progress mb-3" style="height: 8px;">
                            <div class="progress-bar" id="barraProgreso" style="width: 0%"></div>
                        </div>
                        <div class="row text-center">
                            <div class="col-6">
                                <small class="text-muted">Comunidades creadas</small>
                                <div class="fw-bold" id="totalComunidadesCreadas">0</div>
                            </div>
                            <div class="col-6">
                                <small class="text-muted">Miembros totales</small>
                                <div class="fw-bold" id="totalMiembros">0</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Formulario Principal (Columna Izquierda) -->
        <div class="col-lg-8">
            <form id="comunidadForm">
                <!-- Paso 1: Informaci√≥n B√°sica - VISIBLE AL INICIO -->
                <div class="form-section active" data-step="1">
                    <h3 class="text-primary mb-4">
                        <i class="fas fa-info-circle me-2"></i>Informaci√≥n B√°sica
                    </h3>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="comunidadNombre" class="form-label text-light">Nombre de la Comunidad *</label>
                            <input type="text" class="form-control bg-dark text-light" id="comunidadNombre" 
                                   placeholder="Ej: League of Legends Espa√±a" required maxlength="50">
                            <div class="form-text text-muted">M√°ximo 50 caracteres</div>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label for="comunidadSubtitulo" class="form-label text-light">Subt√≠tulo</label>
                            <input type="text" class="form-control bg-dark text-light" id="comunidadSubtitulo" 
                                   placeholder="Ej: La comunidad hispana de LoL" maxlength="30">
                            <div class="form-text text-muted">Aparecer√° debajo del nombre</div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="comunidadDescripcion" class="form-label text-light">Descripci√≥n *</label>
                        <textarea class="form-control bg-dark text-light" id="comunidadDescripcion" 
                                  rows="4" placeholder="Describe tu comunidad, su prop√≥sito y a qu√© tipo de jugadores est√° dirigida..." 
                                  required maxlength="500"></textarea>
                        <div class="form-text text-muted">
                            <span id="descripcionContador">0</span>/500 caracteres
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="comunidadJuego" class="form-label text-light">Juego Principal</label>
                        <input type="text" class="form-control bg-dark text-light" id="comunidadJuego" 
                               placeholder="Ej: League of Legends, Valorant, Minecraft...">
                    </div>
                </div>

                <!-- Paso 2: Apariencia - OCULTO INICIALMENTE -->
                <div class="form-section" data-step="2">
                    <h3 class="text-primary mb-4">
                        <i class="fas fa-palette me-2"></i>Apariencia
                    </h3>
                    
                    <div class="alert alert-info mb-4">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>Recomendaciones:</strong> Icono (64x64 px) ‚Ä¢ Banner (400x200 px) ‚Ä¢ Formatos: JPG, PNG, GIF
                    </div>
                    
                    <div class="row">
                        <!-- Icono de la Comunidad -->
                        <div class="col-md-6 mb-4">
                            <label class="form-label text-light">
                                <i class="fas fa-image me-1"></i>Icono de la Comunidad *
                            </label>
                            <div class="image-upload-area position-relative" 
                                 onclick="document.getElementById('iconoUpload').click()"
                                 id="iconoUploadArea">
                                <div id="iconoPlaceholder">
                                    <i class="fas fa-camera fa-3x text-muted mb-3"></i>
                                    <p class="text-muted mb-1">Haz clic para subir un icono</p>
                                    <small class="text-muted">Recomendado: 64x64 px</small>
                                </div>
                                <img id="iconoPreview" class="image-preview mt-2" style="display: none;">
                                <div class="upload-overlay">
                                    <i class="fas fa-sync-alt"></i>
                                    <span>Cambiar icono</span>
                                </div>
                            </div>
                            <input type="file" id="iconoUpload" accept="image/*" style="display: none;" 
                                   onchange="previewImage(this, 'iconoPreview', 'iconoUploadArea', 'iconoPlaceholder')">
                            
                            <!-- Previsualizaci√≥n del icono en tama√±o real -->
                            <div class="mt-3" id="iconoMiniPreview" style="display: none;">
                                <small class="text-muted d-block mb-2">Vista previa del icono:</small>
                                <div class="d-flex align-items-center gap-3">
                                    <img id="iconoMini" class="rounded" style="width: 64px; height: 64px; object-fit: cover; border: 2px solid #66c0f4;">
                                    <div>
                                        <small class="text-success">
                                            <i class="fas fa-check-circle me-1"></i>
                                            Icono cargado correctamente
                                        </small>
                                        <br>
                                        <small class="text-muted">Tama√±o: <span id="iconoSize">0x0</span> px</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Banner de la Comunidad -->
                        <div class="col-md-6 mb-4">
                            <label class="form-label text-light">
                                <i class="fas fa-image me-1"></i>Banner de la Comunidad *
                            </label>
                            <div class="image-upload-area position-relative" 
                                 onclick="document.getElementById('bannerUpload').click()"
                                 id="bannerUploadArea">
                                <div id="bannerPlaceholder">
                                    <i class="fas fa-image fa-3x text-muted mb-3"></i>
                                    <p class="text-muted mb-1">Haz clic para subir un banner</p>
                                    <small class="text-muted">Recomendado: 400x200 px</small>
                                </div>
                                <img id="bannerPreview" class="image-preview mt-2" style="display: none;">
                                <div class="upload-overlay">
                                    <i class="fas fa-sync-alt"></i>
                                    <span>Cambiar banner</span>
                                </div>
                            </div>
                            <input type="file" id="bannerUpload" accept="image/*" style="display: none;" 
                                   onchange="previewImage(this, 'bannerPreview', 'bannerUploadArea', 'bannerPlaceholder')">
                            
                            <!-- Previsualizaci√≥n del banner en tama√±o real -->
                            <div class="mt-3" id="bannerMiniPreview" style="display: none;">
                                <small class="text-muted d-block mb-2">Vista previa del banner:</small>
                                <div class="d-flex align-items-center gap-3">
                                    <img id="bannerMini" class="rounded" style="width: 200px; height: 100px; object-fit: cover; border: 2px solid #66c0f4;">
                                    <div>
                                        <small class="text-success">
                                            <i class="fas fa-check-circle me-1"></i>
                                            Banner cargado correctamente
                                        </small>
                                        <br>
                                        <small class="text-muted">Tama√±o: <span id="bannerSize">0x0</span> px</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Selector de Color Mejorado -->
                    <div class="mb-4">
                        <label for="comunidadColor" class="form-label text-light">
                            <i class="fas fa-palette me-1"></i>Color Principal de la Comunidad
                        </label>
                        <div class="d-flex align-items-center gap-3">
                            <input type="color" class="form-control form-control-color" id="comunidadColor" 
                                   value="#66c0f4" title="Elige el color principal de tu comunidad"
                                   style="width: 80px; height: 50px;">
                            <div>
                                <div class="color-preview p-2 rounded" style="background-color: #66c0f4; border: 2px solid #444;">
                                    <small class="text-dark fw-bold" id="colorHex">#66C0F4</small>
                                </div>
                                <small class="text-muted">Este color se usar√° en t√≠tulos y elementos</small>
                            </div>
                        </div>
                    </div>

                    <!-- Galer√≠a de iconos predefinidos -->
                    <div class="mb-3">
                        <label class="form-label text-light">
                            <i class="fas fa-icons me-1"></i>Iconos Predefinidos (Opcional)
                        </label>
                        <div class="icon-gallery">
                            <div class="row g-2">
                                <div class="col-auto">
                                    <div class="icon-option" onclick="seleccionarIconoPredefinido('üéÆ')">
                                        üéÆ
                                    </div>
                                </div>
                                <div class="col-auto">
                                    <div class="icon-option" onclick="seleccionarIconoPredefinido('‚öîÔ∏è')">
                                        ‚öîÔ∏è
                                    </div>
                                </div>
                                <div class="col-auto">
                                    <div class="icon-option" onclick="seleccionarIconoPredefinido('üõ°Ô∏è')">
                                        üõ°Ô∏è
                                    </div>
                                </div>
                                <div class="col-auto">
                                    <div class="icon-option" onclick="seleccionarIconoPredefinido('üîÆ')">
                                        üîÆ
                                    </div>
                                </div>
                                <div class="col-auto">
                                    <div class="icon-option" onclick="seleccionarIconoPredefinido('üëë')">
                                        üëë
                                    </div>
                                </div>
                                <div class="col-auto">
                                    <div class="icon-option" onclick="seleccionarIconoPredefinido('üêâ')">
                                        üêâ
                                    </div>
                                </div>
                                <div class="col-auto">
                                    <div class="icon-option" onclick="seleccionarIconoPredefinido('üåü')">
                                        üåü
                                    </div>
                                </div>
                                <div class="col-auto">
                                    <div class="icon-option" onclick="seleccionarIconoPredefinido('üî•')">
                                        üî•
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-text text-muted">
                            Puedes usar un icono predefinido o subir tu propia imagen
                        </div>
                    </div>
                </div>

                <!-- Paso 3: Categor√≠as y Tags - OCULTO INICIALMENTE -->
                <div class="form-section" data-step="3">
                    <h3 class="text-primary mb-4">
                        <i class="fas fa-tags me-2"></i>Categor√≠as y Etiquetas
                    </h3>
                    
                    <div class="mb-3">
                        <label class="form-label text-light">Categor√≠a Principal *</label>
                        <select class="form-select bg-dark text-light" id="comunidadCategoria" required>
                            <option value="">Selecciona una categor√≠a</option>
                            <option value="Shooter">Shooter</option>
                            <option value="RPG">RPG</option>
                            <option value="Estrategia">Estrategia</option>
                            <option value="Deportes">Deportes</option>
                            <option value="Carreras">Carreras</option>
                            <option value="Indie">Indie</option>
                            <option value="Multijugador">Multijugador</option>
                            <option value="Cooperativo">Cooperativo</option>
                            <option value="Competitivo">Competitivo</option>
                            <option value="Casual">Casual</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label text-light">Etiquetas</label>
                        <div class="tag-input-container">
                            <input type="text" class="form-control bg-dark text-light" id="tagInput" 
                                   placeholder="Escribe una etiqueta y presiona Enter" maxlength="20">
                            <div class="tag-suggestions" id="tagSuggestions"></div>
                        </div>
                        <div class="form-text text-muted">
                            Presiona Enter para agregar etiquetas. M√°ximo 5 etiquetas.
                        </div>
                        <div id="tagsContainer" class="mt-2"></div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label text-light">Idioma Principal *</label>
                        <select class="form-select bg-dark text-light" id="comunidadIdioma" required>
                            <option value="es">Espa√±ol</option>
                            <option value="en">English</option>
                            <option value="fr">Fran√ßais</option>
                            <option value="de">Deutsch</option>
                            <option value="pt">Portugu√™s</option>
                        </select>
                    </div>
                </div>

                <!-- Paso 4: Configuraci√≥n - OCULTO INICIALMENTE -->
                <div class="form-section" data-step="4">
                    <h3 class="text-primary mb-4">
                        <i class="fas fa-cogs me-2"></i>Configuraci√≥n
                    </h3>
                    
                    <div class="mb-3">
                        <label class="form-label text-light">Tipo de Comunidad *</label>
                        <select class="form-select bg-dark text-light" id="comunidadTipo" required>
                            <option value="publica">P√∫blica - Cualquiera puede unirse</option>
                            <option value="restringida">Restringida - Aprobaci√≥n requerida</option>
                            <option value="privada">Privada - Solo por invitaci√≥n</option>
                        </select>
                    </div>

                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="comunidadNSFW">
                        <label class="form-check-label text-light" for="comunidadNSFW">
                            Contenido para adultos (NSFW)
                        </label>
                        <div class="form-text text-muted">
                            Marca esta opci√≥n si tu comunidad puede contener contenido para mayores de 18 a√±os
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="comunidadReglas" class="form-label text-light">Reglas de la Comunidad</label>
                        <textarea class="form-control bg-dark text-light" id="comunidadReglas" 
                                  rows="4" placeholder="Establece las reglas b√°sicas de comportamiento..."></textarea>
                        <div class="form-text text-muted">
                            Las reglas ayudan a mantener un ambiente saludable en la comunidad
                        </div>
                    </div>
                </div>

                <!-- Botones de Navegaci√≥n -->
                <div class="d-flex justify-content-between mt-4">
                    <button type="button" class="btn btn-secondary" id="btnAnterior" style="display: none;">
                        <i class="fas fa-arrow-left me-1"></i>Anterior
                    </button>
                    <button type="button" class="btn btn-primary ms-auto" id="btnSiguiente">
                        Siguiente <i class="fas fa-arrow-right ms-1"></i>
                    </button>
                    <button type="submit" class="btn btn-success" id="btnCrear" style="display: none;">
                        <i class="fas fa-plus me-1"></i>Crear Comunidad
                    </button>
                </div>
            </form>
        </div>
    </div>
</section>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="../js/creadorComunidades.js"></script>
</body>
</html>